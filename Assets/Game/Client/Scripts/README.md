# Колесо Фортуны - Unity проект

## Описание
Реализация механизма рулетки с использованием лучших практик Unity и DOTween для анимаций.

## Структура проекта

### Core (Основная логика)
- **`RewardType.cs`** - Enum типов наград (Кристаллы, Монеты, Рубины)
- **`WheelState.cs`** - Enum состояний рулетки (Кулдаун, Активна, Вращение)
- **`WheelGenerator.cs`** - Генератор значений рулетки с исключением повторяющихся типов
- **`RewardCalculator.cs`** - Калькулятор распределения наград по объектам
- **`WheelOfFortuneController.cs`** - Главный контроллер, управляющий всеми состояниями

### States (Состояния)
- **`IWheelState.cs`** - Интерфейс для паттерна State
- **`CooldownState.cs`** - Состояние кулдауна (10 секунд, генерация каждую секунду)
- **`ActiveState.cs`** - Активное состояние (кнопка активна)
- **`SpinningState.cs`** - Состояние вращения (анимация 5 секунд)

### UI (Интерфейс)
- **`WheelSlot.cs`** - Представление слота рулетки с подсветкой
- **`RewardObject.cs`** - Анимированный объект награды
- **`WheelUI.cs`** - Основной UI контроллер

### Utils (Утилиты)
- **`ObjectPool.cs`** - Object Pool для оптимизации создания объектов

## Основные особенности

### Генерация рулетки
- Случайный выбор типа награды (исключая последний)
- Уникальные значения слотов от 5 до 100, кратные 5
- 12 слотов

### Состояния
1. **Кулдаун** - 10 секунд, генерация каждую секунду, кнопка заблокирована
2. **Активна** - кнопка разблокирована, рулетка готова к вращению
3. **Вращение** - анимация 5 секунд, выбор награды

### Анимации
- Вращение рулетки с замедлением
- Спавн объектов наград (до 20 штук)
- Анимация получения награды с летающими объектами

### Оптимизация
- Object Pooling для объектов наград
- Кэширование компонентов
- Эффективные анимации с DOTween

## Настройка в Unity

### Требования
- Unity 2022.3 LTS или новее
- DOTween (должен быть установлен в проекте)
- TextMeshPro

### Настройка сцены
1. Создайте пустой GameObject и добавьте `WheelOfFortuneController`
2. Добавьте `ObjectPool` компонент
3. Создайте UI элементы:
   - Заголовок (TextMeshPro)
   - Контейнер рулетки с 12 слотами
   - Центральная иконка
   - Кнопка "Испытать удачу"
4. Настройте ссылки в инспекторе

### Настройка Object Pool
1. Добавьте префаб объекта награды в Object Pool
2. Установите размер пула (рекомендуется 20)

## Использование

### Запуск
Проект автоматически запускается в состоянии кулдауна. После 10 секунд рулетка становится активной.

### Управление
- Нажмите "Испытать удачу" для запуска вращения
- Наблюдайте за анимацией получения награды
- Автоматический переход в кулдаун после завершения

## Расширение

### Добавление новых типов наград
1. Добавьте новый тип в `RewardType` enum
2. Обновите `WheelGenerator.GenerateRewardType()`
3. Добавьте иконку в `WheelUI`

### Изменение логики генерации
Модифицируйте `WheelGenerator.cs` для изменения правил генерации значений.

### Настройка анимаций
Измените параметры в `SpinningState.cs` и `RewardObject.cs` для настройки времени и кривых анимации.

## Тестирование

### Логи
- Результат выбора награды выводится в консоль Unity
- Используйте Debug.Log для отладки состояний

### Производительность
- Мониторьте создание/уничтожение объектов
- Используйте Profiler для анализа анимаций

## Примечания
- Все анимации используют DOTween для плавности
- Object Pool предотвращает частые вызовы Instantiate/Destroy
- State Pattern обеспечивает чистую архитектуру и легкое тестирование
